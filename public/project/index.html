<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Event</title>
    <link rel="stylesheet" href="./application/e-poster/css/glightbox.min.css">
    <link rel="stylesheet" href="./application/assets/css/index1000.css">
</head>
<body>
    <img class="background" />

    <div class="content">
        <ul class="listliks" id="buttonList">
            <!-- Buttons will be dynamically inserted here -->
        </ul>
    </div>

    <script src="./application/e-poster/js/jquery.min.js"></script>
    <script src="./application/assets/js/bootstrap.min.js"></script>
    <script src="./application/e-poster/js/swiper-bundle.min.js"></script>
    <script src="./application/e-poster/js/glightbox.min.js" id="glightbox"></script>
    <script src="./application/e-poster/js/main.js" id="main"></script>
    <script src="./application/assets/js/accueil.js"></script>

    <script>
        const customPath = './application/assets/items/';
    
        function imageExists(imgPath) {
            return new Promise((resolve) => {
                const img = new Image();
                img.onload = () => resolve(true);
                img.onerror = () => resolve(false);
                img.src = imgPath;
            });
        }
    
        async function generateButtons() {
            const buttonList = document.getElementById("buttonList");
            const maxImages = 100;
    
            for (let i = 1; i <= maxImages; i++) {
                const imgPath = `${customPath}${i}.png`;
                const exists = await imageExists(imgPath);
    
                if (exists) {
                    let category;
    
                    // Logic to determine the category based on your criteria
                    if (i % 3 === 0) {
                        category = 'reddifusion'; // Example condition for reddifusion
                    } else if (i % 2 === 0) {
                        category = 'programme'; // Example condition for programme
                    } else {
                        category = 'e-poster'; // Default to e-poster
                    }
    
                    let redirectPath;
                    if (category === 'e-poster') {
                        redirectPath = 'application/e-poster/index.html'; // Default path for e-poster
                    } else if (category === 'programme') {
                        redirectPath = 'application/assets/img/app/programme/programme.pdf'; // Default path for programme
                    } else if (category === 'reddifusion') {
                        redirectPath = 'application/assets/vendredi.html'; // Default path for reddifusion
                    } else {
                        redirectPath = imgPath; // Fallback to image path
                    }
    
                    const listItem = document.createElement("li");
                    listItem.innerHTML = `
                        <a href="${redirectPath}" class="fixed-button" style="margin-top: 5px;" rel="noopener noreferrer">
                            <img src="${imgPath}" class="btnPoster" alt="Poster image ${i}">
                        </a>
                    `;
                    buttonList.appendChild(listItem);
                } else {
                    break; // Stop if the image doesn't exist
                }
            }
        }
    
        document.addEventListener("DOMContentLoaded", () => {
            generateButtons();
        });
    </script>    
</body>
</html>
